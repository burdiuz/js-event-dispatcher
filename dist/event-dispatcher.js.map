{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4eb8d38a32536aa91e4e","webpack:///./source/EventDispatcher.js","webpack:///./~/SymbolImpl/SymbolImpl.js","webpack:///./source/index.js"],"names":["Event","type","data","defaultPrevented","stopPropagation","stopImmediatePropagation","EventListeners","_listeners","eventType","priority","target","priorities","getHashByKey","Object","parseInt","Array","key","definition","value","hasOwnProperty","handler","handlers","createList","indexOf","push","result","list","getOwnPropertyNames","length","index","handlerIndex","splice","event","_stopped","_immediatelyStopped","sort","a","b","handlersLength","handlersIndex","call","LISTENERS_FIELD","PREPROCESSOR_FIELD","EventDispatcher","eventPreprocessor","noInit","initialize","listener","add","has","remove","removeAll","eventObject","getEvent","eventOrType","optionalData","isObject","String","SymbolImpl","Symbol","symbol","Math","random","toString","valueOf","module","exports"],"mappings":"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","file":"event-dispatcher.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EventDispatcher\"] = factory();\n\telse\n\t\troot[\"EventDispatcher\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4eb8d38a32536aa91e4e","/**\r\n * Created by Oleg Galaburda on 09.02.16.\r\n */\r\n\r\n'use strict';\r\n\r\nimport SymbolImpl from 'SymbolImpl';\r\n\r\nexport class Event {\r\n\r\n  constructor(type, data) {\r\n    this.type = type;\r\n    this.data = data || null;\r\n    this.defaultPrevented = false;\r\n\tthis.stopPropagation;\r\n\tthis.stopImmediatePropagation;\r\n  }\r\n\r\n  toJSON() {\r\n    return { type: this.type, data: this.data };\r\n  }\r\n\r\n  isDefaultPrevented() {\r\n    return this.defaultPrevented;\r\n  }\r\n\r\n  preventDefault() {\r\n    this.defaultPrevented = true;\r\n  }\r\n}\r\n\r\nclass EventListeners {\r\n\r\n  constructor() {\r\n    /**\r\n     * key - event Type\r\n     * value - hash of priorities\r\n     *    key - priority\r\n     *    value - list of handlers\r\n     * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n     * @private\r\n     */\r\n    this._listeners = {};\r\n  }\r\n\r\n  createList(eventType, priority, target) {\r\n    const priorities = this.getHashByKey(eventType, target, Object);\r\n    return this.getHashByKey(parseInt(priority), priorities, Array);\r\n  }\r\n\r\n  getHashByKey(key, target, definition) {\r\n    let value = null;\r\n    if (target.hasOwnProperty(key)) {\r\n      value = target[key];\r\n    } else if (definition) {\r\n      value = target[key] = new definition();\r\n    }\r\n    return value;\r\n  }\r\n\r\n  add(eventType, handler, priority) {\r\n    const handlers = this.createList(eventType, priority, this._listeners);\r\n    if (handlers.indexOf(handler) < 0) {\r\n      handlers.push(handler);\r\n    }\r\n  }\r\n\r\n  has(eventType) {\r\n    let result = false;\r\n    const priorities = this.getHashByKey(eventType, this._listeners);\r\n    if (priorities) {\r\n      for (let priority in priorities) {\r\n        if (priorities.hasOwnProperty(priority)) {\r\n          result = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  remove(eventType, handler) {\r\n    const priorities = this.getHashByKey(eventType, this._listeners);\r\n    if (priorities) {\r\n      const list = Object.getOwnPropertyNames(priorities);\r\n      const length = list.length;\r\n      for (let index = 0; index < length; index++) {\r\n        const priority = list[index];\r\n        const handlers = priorities[priority];\r\n        const handlerIndex = handlers.indexOf(handler);\r\n        if (handlerIndex >= 0) {\r\n          handlers.splice(handlerIndex, 1);\r\n          if (!handlers.length) {\r\n            delete priorities[priority];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  removeAll(eventType) {\r\n    delete this._listeners[eventType];\r\n  }\r\n\r\n  call(event, target) {\r\n    let _stopped = false;\r\n    let _immediatelyStopped = false;\r\n    const stopPropagation = () => {\r\n      _stopped = true;\r\n    };\r\n    const stopImmediatePropagation = () => {\r\n      _immediatelyStopped = true;\r\n    };\r\n    event.stopPropagation = stopPropagation;\r\n    event.stopImmediatePropagation = stopImmediatePropagation;\r\n    const priorities = this.getHashByKey(event.type, this._listeners);\r\n    if (priorities) {\r\n      const list = Object.getOwnPropertyNames(priorities).sort((a, b) => (a - b));\r\n      const length = list.length;\r\n      for (let index = 0; index < length; index++) {\r\n        if (_stopped) break;\r\n        const handlers = priorities[list[index]];\r\n        const handlersLength = handlers.length;\r\n        for (let handlersIndex = 0; handlersIndex < handlersLength; handlersIndex++) {\r\n          if (_immediatelyStopped) break;\r\n          let handler = handlers[handlersIndex];\r\n          // FIXME why \"handler\" sometimes undefined?\r\n          handler && handler.call(target, event);\r\n        }\r\n      }\r\n    }\r\n    delete event.stopPropagation;\r\n    delete event.stopImmediatePropagation;\r\n  }\r\n}\r\n\r\nconst LISTENERS_FIELD = SymbolImpl('event.dispatcher::listeners');\r\nconst PREPROCESSOR_FIELD = SymbolImpl('event.dispatcher::preprocessor');\r\n\r\nexport class EventDispatcher {\r\n\r\n  constructor(eventPreprocessor, noInit = false) {\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  initialize(eventPreprocessor) {\r\n\tthis[PREPROCESSOR_FIELD] = eventPreprocessor;\r\n    this[LISTENERS_FIELD] = new EventListeners();\r\n  }\r\n\r\n  addEventListener(eventType, listener, priority) {\r\n    this[LISTENERS_FIELD].add(eventType, listener, -priority || 0);\r\n  }\r\n\r\n  hasEventListener(eventType) {\r\n    return this[LISTENERS_FIELD].has(eventType);\r\n  }\r\n\r\n  removeEventListener(eventType, listener) {\r\n    this[LISTENERS_FIELD].remove(eventType, listener);\r\n  }\r\n\r\n  removeAllEventListeners(eventType) {\r\n    this[LISTENERS_FIELD].removeAll(eventType);\r\n  }\r\n\r\n  dispatchEvent(event, data) {\r\n    var eventObject = EventDispatcher.getEvent(event, data);\r\n    if (this[PREPROCESSOR_FIELD]) {\r\n      eventObject = this[PREPROCESSOR_FIELD].call(this, eventObject);\r\n    }\r\n    this[LISTENERS_FIELD].call(eventObject);\r\n  }\r\n\r\n  static isObject(value) {\r\n    return (typeof value === 'object') && (value !== null);\r\n  }\r\n\r\n  static getEvent(eventOrType, optionalData) {\r\n    let event = eventOrType;\r\n    if (!EventDispatcher.isObject(eventOrType)) {\r\n      event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n    }\r\n    return event;\r\n  }\r\n\r\n  static create(eventPreprocessor) {\r\n    return new EventDispatcher(eventPreprocessor);\r\n  }\r\n}\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexport default EventDispatcher;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/EventDispatcher.js","'use strict';\r\n\r\nlet SymbolImpl;\r\n\r\nif (typeof(Symbol) === 'undefined') {\r\n  SymbolImpl = (value) => {\r\n\t  const symbol = () => `@@${value}:${Math.random()}`;\r\n\t  symbol.toString = symbol;\r\n\t  symbol.valueOf = symbol;\r\n\t  return symbol;\r\n  };\r\n} else {\r\n  SymbolImpl = Symbol;\r\n}\r\n\r\nexport default SymbolImpl;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/SymbolImpl/SymbolImpl.js","'use strict';\r\n\r\nimport EventDispatcher, { Event } from './EventDispatcher';\r\n\r\nmodule.exports = EventDispatcher;\r\n\r\n/*\r\nexport default EventDispatcher;\r\nexport { EventDispatcher, Event };\r\n*/\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js"],"sourceRoot":""}