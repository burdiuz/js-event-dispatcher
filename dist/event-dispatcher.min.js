!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.EventDispatcher={})}(this,function(e){"use strict";const t=e=>"object"==typeof e&&null!==e;class s{constructor(e,t=null){this.type=e,this.data=t,this.defaultPrevented=!1}toJSON(){return{type:this.type,data:this.data}}isDefaultPrevented(){return this.defaultPrevented}preventDefault(){this.defaultPrevented=!0}}const n=(e,n)=>{let i=e;return t(e)||(i=new s(String(e),n)),i};var i,r,o=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const s=(e=>(t,s)=>Boolean(t&&e.call(t,s)))(Object.prototype.hasOwnProperty);t.hasOwn=s,t.default=s}(i={exports:{}},i.exports),i.exports),l=(r=o)&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;o.hasOwn;class a{constructor(e,t,s){this.index=-1,this.immediatelyStopped=!1,this.stopImmediatePropagation=(()=>{this.immediatelyStopped=!0}),this.listeners=e,this.onStopped=t,this.onComplete=s}run(e,t){let s;const{listeners:n}=this;for(this.augmentEvent(e),this.index=0;this.index<n.length&&!this.immediatelyStopped;this.index++)(s=n[this.index]).call(t,e);this.clearEvent(e),this.onComplete(this)}augmentEvent(e){const t=e;t.stopPropagation=this.onStopped,t.stopImmediatePropagation=this.stopImmediatePropagation}clearEvent(e){const t=e;delete t.stopPropagation,delete t.stopImmediatePropagation}listenerRemoved(e,t){e===this.listeners&&t<=this.index&&this.index--}}class h{constructor(){this._listeners={},this._runners=[],this.removeRunner=(e=>{this._runners.splice(this._runners.indexOf(e),1)})}createList(e,t){const s=parseInt(t,10),n=this.getPrioritiesByKey(e),i=String(s);let r;return l(n,i)?r=n[i]:(r=[],n[i]=r),r}getPrioritiesByKey(e){let t;return l(this._listeners,e)?t=this._listeners[e]:(t={},this._listeners[e]=t),t}add(e,t,s){const n=this.createList(e,s);n.indexOf(t)<0&&n.push(t)}has(e){let t,s=!1;const n=this.getPrioritiesByKey(e);if(n)for(t in n)if(l(n,t)){s=!0;break}return s}remove(e,t){const s=this.getPrioritiesByKey(e);if(s){const e=Object.getOwnPropertyNames(s),{length:n}=e;for(let i=0;i<n;i++){const n=e[i],r=s[n],o=r.indexOf(t);o>=0&&(r.splice(o,1),r.length||delete s[n],this._runners.forEach(e=>{e.listenerRemoved(r,o)}))}}}removeAll(e){delete this._listeners[e]}createRunner(e,t){const s=new a(e,t,this.removeRunner);return this._runners.push(s),s}call(e,t){const s=this.getPrioritiesByKey(e.type);let n=!1;const i=()=>{n=!0};if(s){const r=Object.getOwnPropertyNames(s).sort((e,t)=>e-t),{length:o}=r;for(let l=0;l<o&&!n;l++){const n=s[r[l]];if(n){const s=this.createRunner(n,i);if(s.run(e,t),s.immediatelyStopped)break}}}}}class c{constructor(e=null){this._eventPreprocessor=e,this._listeners=new h}addEventListener(e,t,s=0){this._listeners.add(e,t,-s||0)}hasEventListener(e){return this._listeners.has(e)}removeEventListener(e,t){this._listeners.remove(e,t)}removeAllEventListeners(e){this._listeners.removeAll(e)}dispatchEvent(e,t){let s=n(e,t);this._eventPreprocessor&&(s=this._eventPreprocessor.call(this,s)),this._listeners.call(s)}static create(e){return new c(e)}}c.Event=s,e.default=c,e.Event=s,e.EventDispatcher=c,e.getEvent=n,e.isObject=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=event-dispatcher.min.js.map
