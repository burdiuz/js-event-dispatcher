!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.EventDispatcher=e()}(this,function(){function t(t){return"object"==typeof t&&null!==t}function e(t){function n(t,e,n){u.add(t,e,-n||0)}function r(t){return u.has(t)}function o(t,e){u.remove(t,e)}function a(t){u.removeAll(t)}function s(n,r){var i=e.getEvent(n,r);t&&(i=t.call(this,i)),u.call(i)}var u=new i;this.addEventListener=n,this.hasEventListener=r,this.removeEventListener=o,this.removeAllEventListeners=a,this.dispatchEvent=s}function n(t,n){var r=t;return e.isObject(t)||(r=new e.Event(String(t),n)),r}var r=function(){function t(){return{type:this.type,data:this.data}}function e(t,e){function n(){return i}function r(){i=!0}var i=!1;Object.defineProperties(this,{type:{value:t,enumerable:!0},data:{value:e||null,enumerable:!0}}),this.preventDefault=r,this.isDefaultPrevented=n}return e.prototype.toJSON=t,e}(),i=function(){function t(t,e,n){var r=o(t,n,this._listeners);r.indexOf(e)<0&&r.push(e)}function e(t){var e=!1,n=a(t,this._listeners);if(n)for(var r in n)if(n.hasOwnProperty(r)){e=!0;break}return e}function n(t,e){var n=a(t,this._listeners);if(n)for(var r=Object.getOwnPropertyNames(n),i=r.length,o=0;i>o;o++){var s=r[o],u=n[s],f=u.indexOf(e);f>=0&&(u.splice(f,1),u.length||delete n[s])}}function r(t){delete this._listeners[t]}function i(t,e){function n(){i=!0}function r(){o=!0}var i=!1,o=!1;t.stopPropagation=n,t.stopImmediatePropagation=r;var s=a(t.type,this._listeners);if(s)for(var u=Object.getOwnPropertyNames(s).sort(function(t,e){return t-e}),f=u.length,l=0;f>l&&!i;l++)for(var c=s[u[l]],p=c.length,v=0;p>v&&!o;v++){var h=c[v];h.call(e,t)}delete t.stopPropagation,delete t.stopImmediatePropagation}function o(t,e,n){var r=a(t,n,Object);return a(parseInt(e),r,Array)}function a(t,e,n){var r=null;return e.hasOwnProperty(t)?r=e[t]:n&&(r=e[t]=new n),r}function s(){this._listeners={}}return s.prototype.add=t,s.prototype.has=e,s.prototype.remove=n,s.prototype.removeAll=r,s.prototype.call=i,s}();return e.isObject=t,e.getEvent=n,e.Event=r,e});