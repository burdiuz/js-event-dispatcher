!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.EventDispatcher=e()}(this,function(){var t=function(){function t(){return{type:this.type,data:this.data}}function e(t,e){function n(){return o}function r(){o=!0}var o=!1;Object.defineProperties(this,{type:{value:t,enumerable:!0},data:{value:e||null,enumerable:!0}}),this.preventDefault=r,this.isDefaultPrevented=n}return e.prototype.toJSON=t,e}(),e=function(){function t(t,e,n){var r=i(t,n,this._listeners);r.indexOf(e)<0&&r.push(e)}function e(t){var e=!1,n=s(t,this._listeners);if(n)for(var r in n)if(n.hasOwnProperty(r)){e=!0;break}return e}function n(t,e){var n=s(t,this._listeners);if(n)for(var r=Object.getOwnPropertyNames(n),o=r.length,i=0;o>i;i++){var a=r[i],u=n[a],p=u.indexOf(e);p>=0&&(u.splice(p,1),u.length||delete n[a])}}function r(t){delete this._listeners[t]}function o(t,e){function n(){o=!0}function r(){i=!0}var o=!1,i=!1;t.stopPropagation=n,t.stopImmediatePropagation=r;var a=s(t.type,this._listeners);if(a)for(var u=Object.getOwnPropertyNames(a).sort(function(t,e){return t-e}),p=u.length,c=0;p>c&&!o;c++)for(var f=a[u[c]],l=f.length,v=0;l>v&&!i;v++){var h=f[v];h.call(e,t)}delete t.stopPropagation,delete t.stopImmediatePropagation}function i(t,e,n){var r=s(t,n,Object);return s(parseInt(e),r,Array)}function s(t,e,n){var r=null;return e.hasOwnProperty(t)?r=e[t]:n&&(r=e[t]=new n),r}function a(){this._listeners={}}return a.prototype.add=t,a.prototype.has=e,a.prototype.remove=n,a.prototype.removeAll=r,a.prototype.call=o,a}(),n={},r=function(){function r(t){t!==n&&(Object.defineProperty(this,l,{value:new e}),Object.defineProperty(this,v,{value:t}))}function o(t,e,n){this[l].add(t,e,-n||0)}function i(t){return this[l].has(t)}function s(t,e){this[l].remove(t,e)}function a(t){this[l].removeAll(t)}function u(t,e){var n=r.getEvent(t,e);this[v]&&(n=this[v].call(this,n)),this[l].call(n)}function p(t){return"object"==typeof t&&null!==t}function c(t,e){var n=t;return r.isObject(t)||(n=new r.Event(String(t),e)),n}function f(){return new r(n)}var l=Symbol("event.dispatcher::listeners"),v=Symbol("event.dispatcher::preprocessor");return r.prototype.addEventListener=o,r.prototype.hasEventListener=i,r.prototype.removeEventListener=s,r.prototype.removeAllEventListeners=a,r.prototype.dispatchEvent=u,r.isObject=p,r.getEvent=c,r.createNoInitPrototype=f,r.Event=t,r}();return r});